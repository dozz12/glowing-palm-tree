<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThurGPT v4.0 - Image Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }
        .glass {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        .loader-spin {
            border-top-color: #a855f7;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Background Glows -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-purple-900/20 blur-[120px] rounded-full"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-blue-900/20 blur-[120px] rounded-full"></div>
    </div>

    <div class="relative z-10 max-w-4xl mx-auto px-6 py-12 md:py-20">
        <!-- Header -->
        <header class="text-center mb-12">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold tracking-[0.2em] text-purple-400 uppercase mb-4">
                <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-purple-500"></span>
                </span>
                Imagen 4.0 Engine
            </div>
            <h1 class="text-6xl md:text-8xl font-black tracking-tighter mb-4 bg-gradient-to-b from-white via-white to-slate-500 bg-clip-text text-transparent">
                ThurGPT
            </h1>
            <p class="text-slate-400 text-lg max-w-lg mx-auto leading-relaxed">
                Ubah imajinasimu menjadi visual nyata dalam hitungan detik.
            </p>
        </header>

        <!-- Main Card -->
        <div class="glass rounded-[2.5rem] p-6 md:p-8 shadow-2xl space-y-6">
            <!-- Input Section -->
            <div class="space-y-3">
                <div class="flex justify-between items-center px-2">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest">Deskripsi Gambar</label>
                    <button id="clearBtn" class="text-xs font-bold text-slate-500 hover:text-red-400 transition-colors uppercase tracking-widest">Hapus</button>
                </div>
                <textarea id="promptInput" 
                    class="w-full bg-slate-950/50 border border-slate-800 rounded-3xl p-6 text-white placeholder:text-slate-700 focus:ring-2 focus:ring-purple-500/40 focus:border-purple-500/40 outline-none transition-all resize-none h-36 text-lg shadow-inner"
                    placeholder="Contoh: Seekor kucing mengenakan baju besi samurai, berdiri di bawah pohon sakura, gaya sinematik, detail tinggi..."></textarea>
            </div>

            <!-- Action Button -->
            <button id="generateBtn" class="w-full relative group overflow-hidden py-5 rounded-2xl bg-white text-black font-black text-xl tracking-tight transition-all hover:scale-[1.01] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed">
                <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-blue-400 opacity-0 group-hover:opacity-10 transition-opacity"></div>
                <span id="btnText">GENERATE IMAGE</span>
            </button>

            <!-- Result Section -->
            <div id="resultBox" class="relative mt-8 group rounded-3xl overflow-hidden bg-slate-950 border border-slate-800 aspect-square flex items-center justify-center">
                <!-- Placeholder -->
                <div id="placeholder" class="text-center px-10">
                    <div class="w-20 h-20 bg-slate-900 rounded-3xl flex items-center justify-center mx-auto mb-4 border border-slate-800 text-4xl">üé®</div>
                    <p class="text-slate-600 font-medium italic">Belum ada gambar yang dibuat</p>
                </div>

                <!-- Loader -->
                <div id="loader" class="hidden flex flex-col items-center gap-6">
                    <div class="w-16 h-16 border-4 border-slate-800 loader-spin rounded-full"></div>
                    <div class="text-center">
                        <p class="text-purple-400 font-bold text-lg animate-pulse">Sedang Berimajinasi...</p>
                        <p class="text-slate-600 text-xs mt-1">Biasanya butuh waktu 5-10 detik</p>
                    </div>
                </div>

                <!-- Image Output -->
                <img id="imageOutput" class="hidden w-full h-full object-cover transition-all duration-700" alt="Hasil AI">

                <!-- Action Overlay -->
                <div id="imageActions" class="hidden absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all duration-300 flex flex-col items-center justify-center gap-4">
                    <button id="downloadBtn" class="px-8 py-3 bg-white text-black rounded-full font-bold hover:bg-slate-200 transition-all transform translate-y-4 group-hover:translate-y-0 shadow-xl">
                        Simpan Gambar
                    </button>
                </div>
            </div>
        </div>

        <footer class="mt-16 text-center space-y-4">
            <p class="text-slate-600 text-sm font-medium">¬© 2026 ThurGPT v4.0 ‚Ä¢ Dibuat dengan ‚ù§Ô∏è</p>
        </footer>
    </div>

    <script>
        // PENTING: Jika di Vercel, jangan lupa isi API_KEY di Settings
        const apiKey = "AIzaSyDIYuAqPfWveKzWEBB3P8kGoFJeDcIJOr4"; 

        const elements = {
            prompt: document.getElementById('promptInput'),
            generateBtn: document.getElementById('generateBtn'),
            clearBtn: document.getElementById('clearBtn'),
            btnText: document.getElementById('btnText'),
            placeholder: document.getElementById('placeholder'),
            loader: document.getElementById('loader'),
            imageOutput: document.getElementById('imageOutput'),
            imageActions: document.getElementById('imageActions'),
            downloadBtn: document.getElementById('downloadBtn')
        };

        // Clear Function
        elements.clearBtn.onclick = () => {
            elements.prompt.value = '';
            elements.prompt.focus();
        };

        // Generate Function
        elements.generateBtn.onclick = async () => {
            const promptValue = elements.prompt.value.trim();
            if (!promptValue) return alert("Tulis deskripsinya dulu, Boss!");

            // UI State: Loading
            elements.generateBtn.disabled = true;
            elements.btnText.innerText = "PROSES MELUKIS...";
            elements.placeholder.classList.add('hidden');
            elements.imageOutput.classList.add('hidden');
            elements.imageActions.classList.add('hidden');
            elements.loader.classList.remove('hidden');

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        instances: { prompt: promptValue },
                        parameters: { sampleCount: 1 }
                    })
                });

                if (!response.ok) throw new Error("Gagal terhubung ke API. Cek API Key!");

                const data = await response.json();
                const base64 = data.predictions?.[0]?.bytesBase64Encoded;

                if (base64) {
                    elements.imageOutput.src = `data:image/png;base64,${base64}`;
                    elements.imageOutput.classList.remove('hidden');
                    elements.imageActions.classList.remove('hidden');
                } else {
                    throw new Error("Respon API kosong.");
                }

            } catch (err) {
                alert("Error: " + err.message);
                elements.placeholder.classList.remove('hidden');
            } finally {
                elements.loader.classList.add('hidden');
                elements.generateBtn.disabled = false;
                elements.btnText.innerText = "GENERATE IMAGE";
            }
        };

        // Download Function
        elements.downloadBtn.onclick = () => {
            const link = document.createElement('a');
            link.href = elements.imageOutput.src;
            link.download = `ThurGPT-${Date.now()}.png`;
            link.click();
        };
    </script>
</body>
</html>

